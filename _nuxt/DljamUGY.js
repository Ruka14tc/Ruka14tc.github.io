import{f,O as S,N as x,ae as c,k as v,o as p,w as m,r as h,l as o,T as w,G as L,av as z,am as y,aw as A,ax as E,a0 as $,an as R,aa as B,ab as b,n as k,m as I,W as j,aq as q}from"./7ygITqjj.js";const[M,W]=x("AvatarRoot"),D=f({__name:"AvatarRoot",props:{asChild:{type:Boolean},as:{default:"span"}},setup(s){return S(),W({imageLoadingStatus:c("idle")}),(e,t)=>(p(),v(o(w),{"as-child":e.asChild,as:e.as},{default:m(()=>[h(e.$slots,"default")]),_:3},8,["as-child","as"]))}});function C(s,e){return s?e?(s.src!==e&&(s.src=e),s.complete&&s.naturalWidth>0?"loaded":"loading"):"error":"idle"}function F(s,{referrerPolicy:e,crossOrigin:t}={}){const n=c(!1),r=c(null),i=L(()=>n.value?(!r.value&&z&&(r.value=new window.Image),r.value):null),u=c(C(i.value,s.value)),d=l=>()=>{n.value&&(u.value=l)};return y(()=>{n.value=!0,A(l=>{const a=i.value;if(!a)return;u.value=C(a,s.value);const g=d("loaded"),_=d("error");a.addEventListener("load",g),a.addEventListener("error",_),e!=null&&e.value&&(a.referrerPolicy=e.value),typeof(t==null?void 0:t.value)=="string"&&(a.crossOrigin=t.value),l(()=>{a.removeEventListener("load",g),a.removeEventListener("error",_)})})}),E(()=>{n.value=!1}),u}const G=f({__name:"AvatarImage",props:{src:{},referrerPolicy:{},crossOrigin:{},asChild:{type:Boolean},as:{default:"img"}},emits:["loadingStatusChange"],setup(s,{emit:e}){const t=s,n=e,{src:r,referrerPolicy:i,crossOrigin:u}=$(t);S();const d=M(),l=F(r,{referrerPolicy:i,crossOrigin:u});return R(l,a=>{n("loadingStatusChange",a),a!=="idle"&&(d.imageLoadingStatus.value=a)},{immediate:!0}),(a,g)=>B((p(),v(o(w),{role:"img","as-child":a.asChild,as:a.as,src:o(r),"referrer-policy":o(i)},{default:m(()=>[h(a.$slots,"default")]),_:3},8,["as-child","as","src","referrer-policy"])),[[b,o(l)==="loaded"]])}}),T=f({__name:"Avatar",props:{class:{},size:{default:"sm"},shape:{default:"circle"}},setup(s){const e=s;return(t,n)=>(p(),v(o(D),{class:k(o(I)(o(N)({size:t.size,shape:t.shape}),e.class))},{default:m(()=>[h(t.$slots,"default")]),_:3},8,["class"]))}}),U=f({__name:"AvatarImage",props:{src:{},referrerPolicy:{},crossOrigin:{},asChild:{type:Boolean},as:{}},setup(s){const e=s;return(t,n)=>(p(),v(o(G),j(e,{class:"size-full object-cover"}),{default:m(()=>[h(t.$slots,"default")]),_:3},16))}}),N=q("bg-secondary text-foreground inline-flex shrink-0 select-none items-center justify-center overflow-hidden font-normal",{variants:{size:{sm:"size-10 text-xs",base:"size-16 text-2xl",lg:"size-32 text-5xl"},shape:{circle:"rounded-full",square:"rounded-md"}}});export{T as _,U as a};
